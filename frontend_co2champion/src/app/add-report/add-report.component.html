<div class="set-goal-container">
  <h1>Add New Report</h1>

  <form [formGroup]="reportFormGroup" (ngSubmit)="onSubmit()" class="goal-form" novalidate>
    <!-- Title -->
    <div class="form-group">
      <label for="title">Title</label>
      <input
        id="title"
        type="text"
        formControlName="title"
        placeholder="Enter the report title"
        [ngClass]="{ 'is-invalid': isFieldInvalid('title') }"
      />
      <div class="invalid-feedback" *ngIf="isFieldInvalid('title')">
        <div *ngIf="reportFormGroup.get('title')?.errors?.['required']">
          Title is required.
        </div>
        <div *ngIf="reportFormGroup.get('title')?.errors?.['maxlength']">
          Title cannot exceed 200 characters.
        </div>
      </div>
    </div>

    <!-- Description -->
    <div class="form-group">
      <label for="description">Description</label>
      <textarea
        id="description"
        formControlName="description"
        placeholder="Enter a description"
        [ngClass]="{ 'is-invalid': isFieldInvalid('description') }"
      ></textarea>
      <div class="invalid-feedback" *ngIf="isFieldInvalid('description')">
        <div *ngIf="reportFormGroup.get('description')?.errors?.['required']">
          Description is required.
        </div>
        <div *ngIf="reportFormGroup.get('description')?.errors?.['maxlength']">
          Description cannot exceed 800 characters.
        </div>
      </div>
    </div>

    <!-- Reduced Emissions -->
    <div class="form-group">
      <label for="reduced_emissions">Reduced Emissions (Tons)</label>
      <input
        id="reduced_emissions"
        type="number"
        formControlName="reduced_emissions"
        placeholder="Enter reduced emissions"
        [ngClass]="{ 'is-invalid': isFieldInvalid('reduced_emissions') }"
      />
      <div class="invalid-feedback" *ngIf="isFieldInvalid('reduced_emissions')">
        <div *ngIf="reportFormGroup.get('reduced_emissions')?.errors?.['required']">
          Reduced Emissions are required.
        </div>
        <div *ngIf="reportFormGroup.get('reduced_emissions')?.errors?.['min']">
          Reduced Emissions must be positive.
        </div>
        <div *ngIf="reportFormGroup.get('reduced_emissions')?.errors?.['max']">
          Reduced Emissions cannot exceed 100,000 Tons/Year.
        </div>
      </div>
    </div>

    <!-- Date -->
    <div class="form-group">
      <label for="date">Date</label>
      <input
        id="date"
        type="date"
        formControlName="date"
        [ngClass]="{ 'is-invalid': isDateInvalid() }"
      />
      <div class="invalid-feedback" *ngIf="isDateInvalid()">
        <div *ngIf="reportFormGroup.get('date')?.errors?.['required']">
          Date is required.
        </div>
        <div *ngIf="reportFormGroup.hasError('invalidDate')">
          Invalid date selected.
        </div>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="button-group">
      <button type="submit" class="btn">Submit Report</button>
    </div>
  </form>
</div>
